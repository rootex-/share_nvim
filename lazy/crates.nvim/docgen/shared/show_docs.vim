nnoremap <silent> K :call <SID>show_documentation()<cr>
function! s:show_documentation()
    if (index(["vim","help"], &filetype) >= 0)
        execute "h ".expand("<cword>")
    elseif (&filetype == "man")
        execute "Man ".expand("<cword>")
    elseif (expand("%:t") == "Cargo.toml" && luaeval("require('crates').popup_available()"))
        lua require("crates").show_popup()
    else
        lua vim.lsp.buf.hover()
    endif
endfunction
