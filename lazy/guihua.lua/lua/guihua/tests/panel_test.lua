local golden_result = {
  {
    col = 9,
    display_filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    full_text = 'package main',
    kind = 'ðŸš€',
    lnum = 1,
    node_scope = {
      ['end'] = {
        character = 0,
        line = 12,
      },
      start = {
        character = 0,
        line = 0,
      },
    },
    node_text = 'main',
    indent = '',
    indent_level = 0,
    next_indent_level = 0,
    range = {
      ['end'] = {
        character = 12,
        line = 0,
      },
      start = {
        character = 8,
        line = 0,
      },
    },
    text = ' ðŸš€ main      \t package main',
    type = 'namespace',
    uri = 'file:///tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
  },
  {
    col = 6,
    display_filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    full_text = 'func interfaceTest()',
    kind = 'ï‚š ',
    lnum = 5,
    indent = '',
    indent_level = 0,
    next_indent_level = 1,
    node_scope = {
      ['end'] = {
        character = 1,
        line = 11,
      },
      start = {
        character = 0,
        line = 4,
      },
    },
    node_text = 'interfaceTest',
    range = {
      ['end'] = {
        character = 18,
        line = 4,
      },
      start = {
        character = 5,
        line = 4,
      },
    },
    text = ' ï‚š  interfaceTest\t func interfaceTest()',
    type = 'function',
    uri = 'file:///tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
  },
  {
    col = 2,
    display_filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    full_text = 'r := rect{width: 3, height: 4}',
    kind = 'îž› ',
    lnum = 6,
    node_scope = {
      ['end'] = {
        character = 1,
        line = 11,
      },
      start = {
        character = 21,
        line = 4,
      },
    },

    indent = '  ',
    indent_level = 1,
    next_indent_level = 1,
    node_text = 'r',
    range = {
      ['end'] = {
        character = 2,
        line = 5,
      },
      start = {
        character = 1,
        line = 5,
      },
    },
    text = ' îž›    î˜¡ r         \t r := rect{width: 3, height: 4}',
    type = 'var',
    uri = 'file:///tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
  },
  {
    col = 2,
    display_filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    full_text = 'c := circle{radius: 5}',
    kind = 'îž› ',
    lnum = 7,
    node_scope = {
      ['end'] = {
        character = 1,
        line = 11,
      },
      start = {
        character = 21,
        line = 4,
      },
    },
    node_text = 'c',
    indent = '  ',
    indent_level = 1,
    next_indent_level = 1,
    range = {
      ['end'] = {
        character = 2,
        line = 6,
      },
      start = {
        character = 1,
        line = 6,
      },
    },
    text = ' îž›    î˜¡ c         \t c := circle{radius: 5}',
    type = 'var',
    uri = 'file:///tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
  },
  {
    col = 2,
    display_filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    full_text = 'd := circle{radius: 10}',
    kind = 'îž› ',
    lnum = 10,
    indent = '  ',
    indent_level = 2,
    node_scope = {
      ['end'] = {
        character = 1,
        line = 11,
      },
      start = {
        character = 21,
        line = 4,
      },
    },
    node_text = 'd',
    range = {
      ['end'] = {
        character = 2,
        line = 9,
      },
      start = {
        character = 1,
        line = 9,
      },
    },
    text = ' îž›    î˜¡ d         \t d := circle{radius: 10}',
    type = 'var',
    uri = 'file:///tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
  },
  {
    col = 2,
    display_filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    full_text = 'd := circle{radius: 10}',
    kind = 'îž› ',
    lnum = 10,
    indent = '  ',
    indent_level = 2,
    node_scope = {
      ['end'] = {
        character = 1,
        line = 11,
      },
      start = {
        character = 21,
        line = 4,
      },
    },
    node_text = 'e',
    range = {
      ['end'] = {
        character = 2,
        line = 9,
      },
      start = {
        character = 1,
        line = 9,
      },
    },
    text = ' îž›    î˜¡ e         \t e := circle{radius: 10}',
    type = 'var',
    uri = 'file:///tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
  },
  {
    col = 2,
    display_filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    filename = '/tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
    full_text = 'f := circle{radius: 10}',
    kind = 'îž› ',
    lnum = 10,
    indent = '  ',
    indent_level = 1,
    node_scope = {
      ['end'] = {
        character = 1,
        line = 11,
      },
      start = {
        character = 21,
        line = 4,
      },
    },
    node_text = 'f',
    range = {
      ['end'] = {
        character = 2,
        line = 9,
      },
      start = {
        character = 1,
        line = 9,
      },
    },
    text = ' îž›    î˜¡ f         \t f := circle{radius: 10}',
    type = 'var',
    uri = 'file:///tmp/github/ray-x/navigator.lua/tests/fixtures/interface_test.go',
  },
}

package.loaded['guihua'] = nil
package.loaded['guihua.panel'] = nil
vim.cmd('packadd guihua.lua')

local panel = require('guihua.panel')
local log = require('guihua.log').info
local p = panel:new({
  render = function(bufnr)
    log('render for ', bufnr)
    return golden_result
  end,
  -- override format function
  -- format = function(item)
  --   return item.indent ..  '>' .. item.node_text
  -- end
})
log(p)
p:open(true, { 'a' })
